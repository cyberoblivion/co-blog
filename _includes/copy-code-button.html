<!-- Copy button for code blocks -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Find all code blocks
    const codeBlocks = document.querySelectorAll('pre, .highlight');

    codeBlocks.forEach(function(codeBlock) {
      // Create wrapper div for positioning
      const wrapper = document.createElement('div');
      wrapper.style.position = 'relative';

      // Create copy button
      const copyButton = document.createElement('button');
      copyButton.className = 'copy-code-button';
      copyButton.textContent = 'Copy';
      copyButton.setAttribute('aria-label', 'Copy code to clipboard');

      // Insert wrapper and button
      codeBlock.parentNode.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);
      wrapper.appendChild(copyButton);

      // Copy functionality
      copyButton.addEventListener('click', function() {
        const code = codeBlock.querySelector('code') || codeBlock;
        const text = code.textContent;

        navigator.clipboard.writeText(text).then(function() {
          copyButton.textContent = 'Copied!';
          copyButton.classList.add('copied');

          setTimeout(function() {
            copyButton.textContent = 'Copy';
            copyButton.classList.remove('copied');
          }, 2000);
        }).catch(function(err) {
          console.error('Failed to copy: ', err);
        });
      });
    });
  });
</script>

<style>
  .copy-code-button {
    position: absolute;
    top: 8px;
    right: 8px;
    padding: 4px 12px;
    font-size: 12px;
    font-weight: bold;
    color: #fff;
    background:  #61849c;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.3s, background 0.3s;
    z-index: 10;
  }

  div:has(> pre):hover .copy-code-button,
  div:has(> .highlight):hover .copy-code-button {
    opacity: 1;
  }

  .copy-code-button:hover {
    background:  #05233f;
  }

  .copy-code-button.copied {
    background: #6ea41b;
  }
</style>
